<div class="upload-container">
    <h3>Upload File</h3>

    <form>
        <mat-form-field appearance="outline">
            <mat-label>Title</mat-label>
            <button mat-icon-button matPrefix disabled>
                <mat-icon>notes</mat-icon>
            </button>
            <input matInput placeholder="Write Video Title" [formControl]="title">
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>Description</mat-label>
            <button mat-icon-button matPrefix disabled>
                <mat-icon>notes</mat-icon>
            </button>
            <input matInput placeholder="Write Video Description" [formControl]="description">
        </mat-form-field>

        <mat-form-field style="width: 100%;" appearance="outline">
			<mat-label>Video File</mat-label>
			<button mat-icon-button matPrefix (click)="video_input.click()">
                <mat-icon>folder_open</mat-icon>
            </button>

			<input type="text" readonly matInput placeholder="Choose Video File" [formControl]="displayVideo"/>
			<input type="file" accept="video/mp4" multiple hidden #video_input (change)="handleVideoUploadInput($event)"/>
		</mat-form-field>

        <mat-form-field style="width: 100%;" appearance="outline">
			<mat-label>Cover Image File</mat-label>
			<button mat-icon-button matPrefix (click)="cover_input.click()">
                <mat-icon>folder_open</mat-icon>
            </button>

			<input type="text" readonly matInput placeholder="Choose Cover Image File" [formControl]="displayCover"/>
			<input type="file" accept="image/png, image/jpeg" multiple hidden #cover_input (change)="handleCoverUploadInput($event)"/>
		</mat-form-field>

        @if (!updateCategory) {
            <mat-form-field class="example-chip-list" appearance="outline" [floatLabel]="'always'">
                <mat-label>Category</mat-label>
                <button mat-icon-button matPrefix (click)="showAddInput = !showAddInput">
                    @if (!showAddInput) {
                        <mat-icon>add</mat-icon>
                    } @else {
                        <mat-icon>remove</mat-icon>
                    }
                </button>

                <mat-chip-grid #chipGrid>
                    <mat-chip-listbox aria-label="Fish selection" selectable multiple>
                        @for (category of allCategories; track category.id) {
                        <mat-chip-option (click)="selectedCategories(category)" >
                            {{category.name}}
                        </mat-chip-option>
                        }
                    </mat-chip-listbox>
                    <input type="hidden" placeholder="New Category..." #categoryInput [matChipInputFor]="chipGrid" />
                </mat-chip-grid>
            </mat-form-field>
        } @else { 
            <p>Loading...</p>
        }

        @if (showAddInput) {
            <div>
                <mat-form-field style="width: 50%;" appearance="outline">
                    <input matInput placeholder="New category..." [formControl]="categoryCtrl" (keyup.enter)="addCategory()"/>
                </mat-form-field>
                
                <button mat-icon-button matPrefix (click)="addCategory()">
                    <mat-icon>add</mat-icon>
                </button>
            </div>
        }

          <button mat-button
          (click)="saveVideoRequest()">Save</button>

        <!-- <button mat-button [disabled]="!displayVideo.valid || !displayCover.valid || !title.valid || !description.valid"
            (click)="saveVideoRequest()">Save</button> -->
    </form>
</div>
